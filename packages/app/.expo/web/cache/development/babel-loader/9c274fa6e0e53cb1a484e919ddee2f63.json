{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/ivanroldanlusich/webDev/reddit-clone/packages/app/src/modules/post/vote/Vote.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState, useEffect } from \"react\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport * as SVG from \"react-native-svg\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { voteButton } from \"../../../styles/vote\";\nimport { useTheme } from \"@react-navigation/native\";\n\nvar Vote = function Vote(props) {\n  var SvgXml = SVG.SvgXml;\n  var theme = useTheme();\n  var colors = theme.colors;\n  var votePost = props.votePost,\n      path = props.path,\n      voteComment = props.voteComment,\n      id = props.id,\n      index = props.index,\n      votes = props.votes,\n      reducer = props.reducer,\n      user_vote = props.user_vote,\n      voteFullPost = props.voteFullPost,\n      showCount = props.showCount,\n      child = props.child;\n\n  var _useState = useState(null),\n      _useState2 = _slicedToArray(_useState, 2),\n      voteColor = _useState2[0],\n      setVoteColor = _useState2[1];\n\n  var _useState3 = useState(\"voteCount\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      voteCountClass = _useState4[0],\n      setVoteCountClass = _useState4[1];\n\n  useEffect(function () {\n    if (user_vote === 1) {\n      setVoteColor(true);\n      setVoteCountClass(\"voteCountUpvote\");\n    } else if (user_vote === -1) {\n      setVoteColor(false);\n      setVoteCountClass(\"voteCountDownvote\");\n    }\n  }, [user_vote]);\n\n  var handleVote = function handleVote(voteValue) {\n    if (votePost && reducer && (index || index === 0) && id) {\n      votePost(id, voteValue, index, reducer);\n    } else if (voteFullPost && id) {\n      voteFullPost(id, voteValue);\n    } else if (voteComment && path) {\n      voteComment(path, voteValue);\n    }\n\n    if (voteValue === 1) {\n      if (voteColor) {\n        setVoteCountClass(\"voteCount\");\n      } else {\n        setVoteCountClass(\"voteCountUpvote\");\n      }\n\n      setVoteColor(true);\n    } else {\n      voteColor === false ? setVoteCountClass(\"voteCount\") : setVoteCountClass(\"voteCountDownvote\");\n      setVoteColor(false);\n    }\n  };\n\n  var voteXML = \"\\n    <svg\\n      width=\\\"16\\\"\\n      height=\\\"14\\\"\\n      viewBox=\\\"0 0 16 14\\\"\\n      xmlns=\\\"http://www.w3.org/2000/svg\\\"\\n    >\\n    <rect x=\\\"5.71429\\\" y=\\\"4.73685\\\" width=\\\"4.57143\\\" height=\\\"9.26316\\\" />\\n    <path d=\\\"M8 0L14.9282 7.5H1.0718L8 0Z\\\" />\\n    </svg>\";\n  var styles = StyleSheet.create({\n    votesContainer: {\n      flexDirection: \"row\",\n      height: 20,\n      alignItems: \"center\"\n    },\n    voteContainer: {},\n    upvoteContainer: {},\n    downvoteContainer: {},\n    voteCountContainer: {\n      marginLeft: 10,\n      marginRight: 10\n    },\n    voteCount: {\n      color: colors.textMuted\n    },\n    voteCountDownvote: {\n      color: colors.downvoteColor\n    },\n    voteCountUpvote: {\n      color: colors.upvoteColor\n    },\n    vote: _objectSpread({}, voteButton)\n  });\n\n  var getVoteCountClass = function getVoteCountClass() {\n    switch (voteCountClass) {\n      case \"voteCount\":\n        return styles.voteCount;\n\n      case \"voteCountDownvote\":\n        return styles.voteCountDownvote;\n\n      case \"voteCountUpvote\":\n        return styles.voteCountUpvote;\n\n      default:\n        return styles.voteCount;\n    }\n  };\n\n  return React.createElement(View, {\n    style: styles.votesContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 5\n    }\n  }, React.createElement(View, {\n    style: styles.voteContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.vote,\n    onPress: function onPress() {\n      return handleVote(1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 9\n    }\n  }, React.createElement(SvgXml, {\n    xml: voteXML,\n    width: \"100%\",\n    height: \"100%\",\n    fill: voteColor ? colors.upvoteColor : colors.textMuted,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 11\n    }\n  }))), React.createElement(View, {\n    style: styles.voteCountContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }\n  }, React.createElement(Text, {\n    style: getVoteCountClass(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 9\n    }\n  }, votes)), React.createElement(View, {\n    style: styles.voteContainer,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }\n  }, React.createElement(TouchableOpacity, {\n    style: styles.vote,\n    onPress: function onPress() {\n      return handleVote(-1);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 9\n    }\n  }, React.createElement(SvgXml, {\n    xml: voteXML,\n    width: \"100%\",\n    height: \"100%\",\n    fill: voteColor === false ? colors.downvoteColor : colors.textMuted,\n    rotation: 180,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 11\n    }\n  }))));\n};\n\nexport default Vote;","map":{"version":3,"sources":["/home/ivanroldanlusich/webDev/reddit-clone/packages/app/src/modules/post/vote/Vote.tsx"],"names":["React","useState","useEffect","SVG","TouchableOpacity","voteButton","useTheme","Vote","props","SvgXml","theme","colors","votePost","path","voteComment","id","index","votes","reducer","user_vote","voteFullPost","showCount","child","voteColor","setVoteColor","voteCountClass","setVoteCountClass","handleVote","voteValue","voteXML","styles","StyleSheet","create","votesContainer","flexDirection","height","alignItems","voteContainer","upvoteContainer","downvoteContainer","voteCountContainer","marginLeft","marginRight","voteCount","color","textMuted","voteCountDownvote","downvoteColor","voteCountUpvote","upvoteColor","vote","getVoteCountClass"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { View, StyleSheet, Text } from \"react-native\";\nimport * as SVG from \"react-native-svg\";\nimport { TouchableOpacity } from \"react-native-gesture-handler\";\nimport { voteButton } from \"../../../styles/vote\";\nimport { useTheme } from \"@react-navigation/native\";\nimport { ThemeColors } from \"../../../themes/themes\";\n\ninterface Props {\n  id?: string;\n  path?: string[];\n  index?: number;\n  votes: string | number;\n  user_vote: number;\n  reducer?: string;\n  voteComment?: (path: string[], voteValue: number) => void;\n  votePost?: (\n    id: string,\n    voteValue: number,\n    index: number,\n    reducer: string\n  ) => void;\n  voteFullPost?: (id: string, voteValue: number) => void;\n  showCount: boolean;\n  child: boolean;\n}\n\nconst Vote = (props: Props) => {\n  const { SvgXml } = SVG;\n  const theme = useTheme();\n  const colors = theme.colors as ThemeColors;\n  const {\n    votePost,\n    path,\n    voteComment,\n    id,\n    index,\n    votes,\n    reducer,\n    user_vote,\n    voteFullPost,\n    showCount,\n    child,\n  } = props;\n\n  //true for upvote\n  //false for downvote\n  //null for no vote\n  const [voteColor, setVoteColor] = useState<boolean | null>(null);\n\n  const [voteCountClass, setVoteCountClass] = useState<\n    \"voteCount\" | \"voteCountUpvote\" | \"voteCountDownvote\"\n  >(\"voteCount\");\n\n  useEffect(() => {\n    if (user_vote === 1) {\n      setVoteColor(true);\n      setVoteCountClass(\"voteCountUpvote\");\n    } else if (user_vote === -1) {\n      setVoteColor(false);\n      setVoteCountClass(\"voteCountDownvote\");\n    }\n  }, [user_vote]);\n\n  const handleVote = (voteValue: number) => {\n    if (votePost && reducer && (index || index === 0) && id) {\n      votePost(id, voteValue, index, reducer);\n    } else if (voteFullPost && id) {\n      voteFullPost(id, voteValue);\n    } else if (voteComment && path) {\n      voteComment(path, voteValue);\n    }\n\n    if (voteValue === 1) {\n      if (voteColor) {\n        setVoteCountClass(\"voteCount\");\n      } else {\n        setVoteCountClass(\"voteCountUpvote\");\n      }\n      setVoteColor(true);\n    } else {\n      voteColor === false\n        ? setVoteCountClass(\"voteCount\")\n        : setVoteCountClass(\"voteCountDownvote\");\n      setVoteColor(false);\n    }\n  };\n\n  const voteXML = `\n    <svg\n      width=\"16\"\n      height=\"14\"\n      viewBox=\"0 0 16 14\"\n      xmlns=\"http://www.w3.org/2000/svg\"\n    >\n    <rect x=\"5.71429\" y=\"4.73685\" width=\"4.57143\" height=\"9.26316\" />\n    <path d=\"M8 0L14.9282 7.5H1.0718L8 0Z\" />\n    </svg>`;\n\n  const styles = StyleSheet.create({\n    votesContainer: {\n      flexDirection: \"row\",\n      height: 20,\n      alignItems: \"center\",\n    },\n    voteContainer: {},\n    upvoteContainer: {},\n    downvoteContainer: {},\n    voteCountContainer: { marginLeft: 10, marginRight: 10 },\n    voteCount: {\n      color: colors.textMuted,\n    },\n    voteCountDownvote: {\n      color: colors.downvoteColor,\n    },\n    voteCountUpvote: {\n      color: colors.upvoteColor,\n    },\n    vote: {\n      ...voteButton,\n    },\n  });\n\n  const getVoteCountClass = () => {\n    switch (voteCountClass) {\n      case \"voteCount\":\n        return styles.voteCount;\n      case \"voteCountDownvote\":\n        return styles.voteCountDownvote;\n      case \"voteCountUpvote\":\n        return styles.voteCountUpvote;\n      default:\n        return styles.voteCount;\n    }\n  };\n\n  return (\n    <View style={styles.votesContainer}>\n      <View style={styles.voteContainer}>\n        <TouchableOpacity style={styles.vote} onPress={() => handleVote(1)}>\n          <SvgXml\n            xml={voteXML}\n            width=\"100%\"\n            height=\"100%\"\n            fill={voteColor ? colors.upvoteColor : colors.textMuted}\n          />\n        </TouchableOpacity>\n      </View>\n      <View style={styles.voteCountContainer}>\n        <Text style={getVoteCountClass()}>{votes}</Text>\n      </View>\n      <View style={styles.voteContainer}>\n        <TouchableOpacity style={styles.vote} onPress={() => handleVote(-1)}>\n          <SvgXml\n            xml={voteXML}\n            width=\"100%\"\n            height=\"100%\"\n            fill={voteColor === false ? colors.downvoteColor : colors.textMuted}\n            rotation={180}\n          />\n        </TouchableOpacity>\n      </View>\n    </View>\n  );\n};\n\nexport default Vote;\n"]},"metadata":{},"sourceType":"module"}